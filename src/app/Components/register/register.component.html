<section class="container xl:max-w-screen-xl p-10 my-7 rounded-xl shadow-lg bg-slate-100">
    <h2 class="text-3xl my-7 text-main">
        Register Now:
    </h2>
    <form [formGroup]="registerForm">   
        
        <!-- Name Input -->
        <label for="name">Name:</label>
        <div class="relative">
            <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                <i class="fa-solid fa-user"></i>
            </div>
            <input formControlName="name" id="name" class="form-control ps-10" [ngClass]="{
                'input-success': !registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
                'input-error': registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)
            }" type="text">
            </div>
        
        @if (registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)) {
            @if (registerForm.get('name')?.getError('required')) {
                <p class="text-red-600 font-bold mb-4">Name is required.</p>
            }
            @else if (registerForm.get('name')?.getError('minlength')) {
                <p class="text-red-600 font-bold mb-4">Name must be more than 3 characters.</p>
            }
            @else if (registerForm.get('name')?.getError('maxlength')) {
                <p class="text-red-600 font-bold mb-4">Name must be less than 20 characters.</p>
            }
        }


        <!-- Email Input -->

        <label for="email">Email:</label>
        <div class="relative">
            <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                <i class="fa-solid fa-at"></i>
            </div>
        <input formControlName="email" id="email" class="form-control ps-10" [ngClass]="{
            'input-success': !registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
            'input-error': registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)
        }" type="email">
        </div>
        @if (registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)) {
            @if (registerForm.get('email')?.getError('required')) {
                <p class="text-red-600 font-bold mb-4">Email is required.</p>
            }
            @else if (registerForm.get('email')?.getError('email')) {
                <p class="text-red-600 font-bold mb-4">Please enter a valid email address.</p>
            }
        }

        <!-- Phone Input -->
        <label for="phone">Phone:</label>
        <div class="relative">
            <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                <i class="fa-solid fa-phone"></i>
            </div>
            <input formControlName="phone" id="phone" class="form-control ps-10" [ngClass]="{
                'input-success': !registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty),
                'input-error': registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)
            }" type="tel">
         </div>
         @if (registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)) {
            @if (registerForm.get('phone')?.getError('required')) {
                <p class="text-red-600 font-bold mb-4">Phone number is required.</p>
            }
            @else if (registerForm.get('phone')?.getError('pattern')) {
                <p class="text-red-600 font-bold mb-4">Please enter a valid phone number.</p>
            }
        }

        <!-- Password Input -->
        <label for="password">Password:</label>
        <div class="relative">
            <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                <i class="fa-solid fa-lock"></i>
            </div>
        <input formControlName="password" id="password" class="form-control ps-10" [ngClass]="{
            'input-success': !registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty),
            'input-error': registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)
        }" type="password">
        </div>
        @if (registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)) {
            @if (registerForm.get('password')?.getError('required')) {
                <p class="text-red-600 font-bold mb-4">Password is required.</p>
            }
            @else if (registerForm.get('password')?.getError('pattern')) {
                <p class="text-red-600 font-bold mb-4">Password must me more than 6 characters.</p>
            }
        }

        <!--rePassword Input  -->
        <label for="rePassword">Re-enter Your Password:</label>
        <div class="relative">
            <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                <i class="fa-solid fa-lock"></i>
            </div>
          
        <input formControlName="rePassword" id="rePassword" class="form-control ps-10" [ngClass]="{
            'input-success': !registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty),
            'input-error': registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)
        }" type="password">
        </div>
        @if (registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)) {
            <p class="text-red-600 font-bold">Passwords does not match.</p>
        }

        <button (click)="registerSubmit()" [disabled]="isLoading" class="btn-main ms-auto block">Submit
            @if (isLoading) {
                <span><i class="fas fa-spin fa-spinner"></i></span>
            }
        </button>

        @if (errorMessage) {
            <p class="text-red-600 font-bold">{{errorMessage}}</p>
        }
        @if (successStatus) {
            <p class="text-green-600 font-bold">User created successfully.</p>
        }
    </form>
</section>
